# ✅ 最终启动检查清单

## 🚀 启动前必做（第一次运行）

### 步骤 1: 安装 better-sqlite3
```bash
cd c:/Users/86151/Desktop/text4
npm install better-sqlite3 --save
```
**为什么**: 用于数据库初始化脚本

---

### 步骤 2: 初始化数据库
```bash
npm run db:init
```
**预期输出**:
```
✅ 数据库初始化成功！
📁 数据库位置: c:\Users\86151\Desktop\text4\prisma\dev.db
```

**如果失败**: 检查是否安装了better-sqlite3

---

### 步骤 3: 启动开发服务器
```bash
npm run dev
```
**预期输出**:
```
> text4@0.1.0 dev
> next dev

ready - started server on 0.0.0.0:3000
```

**如果端口被占用**: 会自动切换到3001端口

---

### 步骤 4: 打开浏览器
访问: `http://localhost:3000` (或3001)

**预期行为**: 自动跳转到 `/login` 登录页

---

## 🧪 功能测试清单

### 测试1: 用户注册 ✅
1. [ ] 访问 `http://localhost:3000`
2. [ ] 自动跳转到登录页
3. [ ] 点击"注册"标签
4. [ ] 输入用户名：`testuser`
5. [ ] 输入密码：`123456`
6. [ ] 点击"注册"按钮
7. [ ] **预期**: 注册成功，自动跳转到用户中心

**成功标志**: 看到顶部导航栏和"用户中心"页面

---

### 测试2: 记住我功能 ✅
1. [ ] 退出登录（右上角"退出"）
2. [ ] 回到登录页
3. [ ] **检查**: 用户名是否自动填充为`testuser`
4. [ ] **检查**: "记住我"复选框是否自动勾选

**成功标志**: 用户名已填充，只需输入密码

---

### 测试3: 忘记密码功能 ✅
1. [ ] 点击"忘记密码？"链接
2. [ ] **预期**: 弹出友好提示模态框
3. [ ] 点击"知道了"关闭

**成功标志**: 模态框正确显示提示信息

---

### 测试4: 投资画像管理 ✅
1. [ ] 登录后进入用户中心
2. [ ] 点击"编辑投资画像"按钮
3. [ ] 选择风险偏好：稳健
4. [ ] 输入投资金额：50000
5. [ ] 选择投资期限：1-3年
6. [ ] 选择投资目标：稳健收益
7. [ ] 点击"保存信息"
8. [ ] **预期**: 左侧卡片实时更新

**成功标志**: 
- 显示"保存成功！"绿色提示
- 左侧信息卡片显示绿色"稳健"标签
- 金额显示为"¥50,000"

---

### 测试5: 刷新保持登录 ✅
1. [ ] 在用户中心页面按 F5 刷新
2. [ ] **预期**: 页面刷新后仍然保持登录状态
3. [ ] **预期**: 数据未丢失

**成功标志**: 用户信息和画像数据仍然显示

---

### 测试6: 添加投资项目 ✅
1. [ ] 点击导航栏"项目库"
2. [ ] 点击右上角"+ 添加投资项目"
3. [ ] 填写项目信息：
   - 项目名称：国债
   - 项目类型：债券
   - 风险等级：★ 低风险
   - 预期收益率：3.5
   - 投资门槛：100
   - 项目描述：稳健低风险投资
4. [ ] 点击"添加项目"
5. [ ] **预期**: 模态框关闭，项目出现在表格中

**成功标志**: 
- 显示"项目添加成功！"绿色提示
- 表格第一行显示新添加的项目
- 风险等级显示为绿色"★ 低风险"

---

### 测试7: 编辑投资项目 ✅
1. [ ] 点击刚添加项目的"编辑"按钮
2. [ ] 修改预期收益率：4.0
3. [ ] 点击"保存修改"
4. [ ] **预期**: 表格中收益率更新为4.00%

**成功标志**: 
- 显示"项目更新成功！"绿色提示
- 表格数据已更新

---

### 测试8: 高级筛选功能 ✅
1. [ ] 项目类型选择：债券
2. [ ] **预期**: 表格只显示债券类型项目
3. [ ] 风险等级选择：★ 低风险
4. [ ] **预期**: 进一步筛选
5. [ ] 投资门槛输入：500
6. [ ] **预期**: 只显示门槛≤500的项目
7. [ ] 点击"重置筛选"
8. [ ] **预期**: 显示所有项目

**成功标志**: 筛选实时生效，统计信息更新

---

### 测试9: 删除投资项目 ✅
1. [ ] 点击项目的"删除"按钮
2. [ ] **预期**: 弹出红色确认对话框
3. [ ] 点击"删除"
4. [ ] **预期**: 项目从表格中消失

**成功标志**: 
- 显示"项目删除成功！"绿色提示
- 表格中不再显示该项目

---

### 测试10: 路由保护 ✅
1. [ ] 退出登录
2. [ ] 手动访问 `http://localhost:3000/user`
3. [ ] **预期**: 自动重定向到 `/login`
4. [ ] 手动访问 `http://localhost:3000/projects`
5. [ ] **预期**: 自动重定向到 `/login`

**成功标志**: 所有受保护页面都正确重定向

---

## 📊 测试结果记录

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 1. 用户注册 | ⬜ | |
| 2. 记住我功能 | ⬜ | |
| 3. 忘记密码功能 | ⬜ | |
| 4. 投资画像管理 | ⬜ | |
| 5. 刷新保持登录 | ⬜ | |
| 6. 添加投资项目 | ⬜ | |
| 7. 编辑投资项目 | ⬜ | |
| 8. 高级筛选功能 | ⬜ | |
| 9. 删除投资项目 | ⬜ | |
| 10. 路由保护 | ⬜ | |

**全部通过后即可演示！** ✅

---

## 🐛 常见问题排查

### 问题1: 数据库初始化失败
**症状**: `npm run db:init` 报错

**解决方案**:
```bash
# 确保安装了better-sqlite3
npm install better-sqlite3 --save

# 删除旧数据库文件（如果存在）
rm prisma/dev.db

# 重新初始化
npm run db:init
```

---

### 问题2: 登录注册报错"数据库连接失败"
**症状**: 点击注册/登录按钮后显示红色错误

**解决方案**:
```bash
# 检查数据库文件是否存在
ls prisma/dev.db

# 如果不存在，重新初始化
npm run db:init

# 重启开发服务器
npm run dev
```

---

### 问题3: 页面空白或404
**症状**: 访问页面显示404或空白

**解决方案**:
1. 检查服务器是否正常运行
2. 查看终端是否有报错信息
3. 尝试访问根路径 `http://localhost:3000/`
4. 清除浏览器缓存（Ctrl+Shift+Delete）

---

### 问题4: Token过期或无法登录
**症状**: 提示"未授权，请先登录"

**解决方案**:
```javascript
// 打开浏览器控制台（F12）执行
localStorage.clear()
// 然后刷新页面重新登录
```

---

### 问题5: 端口被占用
**症状**: 启动时提示端口3000被占用

**解决方案**:
- Next.js会自动切换到3001端口
- 或手动停止占用3000端口的进程
- 或修改启动命令：`next dev -p 3002`

---

## 🎯 演示准备清单

### 演示前
- [ ] 确保所有10项测试通过
- [ ] 准备好测试账号（testuser/123456）
- [ ] 至少添加3-5个投资项目（不同类型和风险等级）
- [ ] 熟悉功能操作流程
- [ ] 准备好文档（PROJECT_SETUP.md等）

### 演示时
- [ ] 从登录页开始演示
- [ ] 按照DEMO_CHECKLIST.md流程操作
- [ ] 强调技术亮点（安全性、扩展性）
- [ ] 展示代码质量（0 linter错误）
- [ ] 说明未来扩展计划（Phase 3-4）

### 演示后
- [ ] 准备回答老师提问
- [ ] 提供完整代码和文档
- [ ] 说明部署方案（可选）

---

## 📝 快速命令参考

```bash
# 安装依赖
npm install
npm install better-sqlite3 --save

# 数据库
npm run db:init              # 初始化数据库

# 开发
npm run dev                  # 启动开发服务器
npm run build                # 构建生产版本
npm run start                # 启动生产服务器

# 代码质量
npm run lint                 # 运行Linter
```

---

## 🎓 给老师的说明

### 项目亮点
1. **技术栈先进**: Next.js 16 + React 19 + TypeScript
2. **架构合理**: 模块化、可扩展、关注点分离
3. **安全完善**: 5层安全防护措施
4. **代码质量高**: 0 Linter错误，SOLID原则
5. **文档齐全**: 10份详细文档

### 完成度
- Phase 1: 用户中心 ✅ 100%
- Phase 2: 项目库 ✅ 100%
- Phase 3-4: 预留扩展接口

### 运行环境
- Node.js: >= 18.17
- 包管理器: npm
- 数据库: SQLite（本地文件）
- 浏览器: Chrome/Edge/Firefox

### 项目特色
- 真实业务场景（投资推荐）
- 完整的CRUD功能
- 用户友好的交互设计
- 专业的黑白色系UI

---

**准备就绪，开始测试吧！** 🚀
