# InvestAI - 完整网站结构 🎉

## 🌐 完整的网站流程

### 用户访问流程

```
1. 访问 http://localhost:3000
   ↓
2. 自动检测登录状态
   ↓
   ├─ 未登录 → 跳转到 /login (登录/注册页)
   │              ↓
   │         注册/登录成功
   │              ↓
   └─ 已登录 → 跳转到 /dashboard (首页仪表盘)
                ↓
         进入功能模块：
         - /user (用户中心)
         - /projects (项目库)
         - /recommend (智能推荐)
         - /history (推荐记录)
```

## 📄 所有页面详情

### 1. `/login` - 登录/注册页面
**功能：**
- 登录表单（用户名 + 密码）
- 注册表单（用户名 + 密码）
- 记住我功能
- 忘记密码提示
- 表单切换（登录/注册）

**后端API：**
- POST `/api/auth/login` - 用户登录
- POST `/api/auth/register` - 用户注册

**数据存储：**
- `data/users.json` - 用户账号数据

---

### 2. `/dashboard` - 首页仪表盘 ⭐
**功能：**
- 欢迎信息展示
- 快速统计卡片：
  - 投资画像状态（已完善/待完善）
  - 项目库数量
  - 推荐记录数量
- 功能模块卡片（4个）
- 快速操作提示（未完善画像时提示）

**数据来源：**
- GET `/api/profile` - 获取画像状态
- GET `/api/projects` - 获取项目数量
- GET `/api/history` - 获取推荐记录数量

---

### 3. `/user` - 用户中心
**功能：**
- 左侧：个人信息展示卡片
  - 用户名
  - 风险偏好（彩色标签）
  - 投资金额（格式化显示）
  - 投资期限
  - 投资目标
- 右侧：投资画像编辑器
  - 风险偏好（单选：保守/稳健/激进）
  - 投资金额（数字输入）
  - 投资期限（下拉选择）
  - 投资目标（下拉选择）
  - 保存/取消按钮

**后端API：**
- GET `/api/profile` - 获取用户画像
- POST `/api/profile` - 保存/更新画像

**数据存储：**
- `data/profiles.json` - 用户画像数据

---

### 4. `/projects` - 项目库
**功能：**
- 顶部：添加项目按钮
- 高级筛选栏：
  - 按项目类型筛选
  - 按风险等级筛选
  - 按投资门槛筛选
  - 重置按钮
- 项目数据表格：
  - 项目名称
  - 类型
  - 风险等级（彩色星级）
  - 预期收益率
  - 投资门槛
  - 操作（编辑/删除）
- 新增/编辑模态框
- 删除确认对话框

**后端API：**
- GET `/api/projects` - 获取项目列表
- POST `/api/projects` - 创建新项目
- PUT `/api/projects/[id]` - 更新项目
- DELETE `/api/projects/[id]` - 删除项目

**数据存储：**
- `data/projects.json` - 投资项目数据

---

### 5. `/recommend` - 智能推荐
**功能：**
- **未完善画像时：**
  - 提示信息
  - 跳转到用户中心按钮
  
- **已完善画像时：**
  - API 设置区域（可折叠）
    - OpenAI API Key 输入
    - API URL 输入（支持中转）
  - 生成推荐按钮
  - 推荐结果展示：
    - 配置总览（收益率/风险等级/适配度）
    - 推荐理由
    - 项目配置列表
  - 操作按钮：
    - 保存推荐方案
    - 重新生成推荐

**后端API：**
- POST `/api/recommend` - 调用AI生成推荐

**数据存储：**
- `data/recommendations.json` - 推荐记录数据

**AI配置规则：**
- 保守型：低风险≥70%，无高风险
- 稳健型：中低风险≥60%，中高≤10%
- 激进型：高风险≥60%，低风险≤10%

---

### 6. `/history` - 推荐记录
**功能：**
- 推荐记录列表：
  - 生成时间
  - 综合收益率
  - 风险等级
  - 适配度
  - 项目配置预览
  - 点击查看详情
- 详情模态框：
  - 完整的推荐方案信息
  - 配置总览
  - 推荐理由
  - 项目配置列表

**后端API：**
- GET `/api/history` - 获取用户推荐记录

**数据来源：**
- `data/recommendations.json` - 读取历史记录

---

## 🧭 全局导航栏

**位置：** 所有页面顶部（除登录页）

**内容：**
- Logo（点击返回首页）
- 导航链接：
  - 首页
  - 用户中心
  - 项目库
  - 智能推荐
  - 推荐记录
- 退出登录按钮

**状态：**
- 当前页面高亮显示
- 未登录时隐藏导航链接

---

## 🗄️ 数据存储结构

### `data/users.json` - 用户账号
```json
[
  {
    "id": 1,
    "username": "admin",
    "password": "$2a$10$...", // bcrypt加密
    "createdAt": "2025-12-26T12:00:00.000Z",
    "updatedAt": "2025-12-26T12:00:00.000Z"
  }
]
```

### `data/profiles.json` - 投资画像
```json
[
  {
    "id": 1,
    "userId": 1,
    "riskPreference": "稳健",
    "investmentAmount": 100000,
    "investmentPeriod": "1-3年",
    "investmentGoal": "稳健收益",
    "updatedAt": "2025-12-26T12:00:00.000Z"
  }
]
```

### `data/projects.json` - 投资项目
```json
[
  {
    "id": 1,
    "name": "国债ETF",
    "type": "债券",
    "riskLevel": 2,
    "expectedReturn": 4.5,
    "investmentThreshold": 1000,
    "description": "低风险国债基金",
    "createdAt": "2025-12-26T12:00:00.000Z",
    "updatedAt": "2025-12-26T12:00:00.000Z"
  }
]
```

### `data/recommendations.json` - 推荐记录
```json
[
  {
    "id": 1,
    "userId": 1,
    "overallExpectedReturn": 5.2,
    "overallRiskLevel": 2,
    "matchScore": 92,
    "projectAllocations": [
      {
        "projectId": 1,
        "projectName": "国债ETF",
        "allocationType": "债券",
        "allocationRatio": 40,
        "expectedReturnContribution": 2.0,
        "riskWarning": "低风险，本金安全性高"
      }
    ],
    "reasoning": "根据您的稳健型风险偏好...",
    "createdAt": "2025-12-26T12:00:00.000Z"
  }
]
```

---

## 🔐 认证系统

### JWT Token 认证
- 登录成功后生成 JWT Token
- Token 有效期：7天
- Token 存储在 localStorage
- 每个API请求携带 Bearer Token

### 路由保护
- 所有功能页面需要登录才能访问
- 未登录自动跳转到 `/login`
- 登录后自动恢复会话

---

## 🎨 UI 设计规范

### 色彩方案（黑白色系）
- 背景：zinc-950、zinc-900、zinc-800
- 文字：zinc-100、zinc-400、zinc-500
- 边框：zinc-800
- 强调色（仅用于功能性）：
  - 绿色：收益、成功、低风险
  - 黄色：警告、中风险
  - 红色：错误、高风险
  - 蓝色：适配度、信息

### 布局原则
- 响应式设计（桌面 + 移动端）
- 最大宽度：max-w-6xl 或 max-w-7xl
- 卡片式布局（圆角 + 边框 + 悬停效果）
- 网格布局（Grid/Flex）

---

## 🚀 完整使用流程示例

### 新用户首次使用

1. **访问网站** → http://localhost:3000
2. **跳转登录页** → `/login`
3. **注册账号** → 输入用户名和密码
4. **自动登录** → 跳转到 `/dashboard`
5. **看到提示** → "请先完善投资画像"
6. **点击按钮** → 前往 `/user`
7. **填写画像** → 设置风险偏好、金额、期限、目标
8. **保存成功** → 返回 `/dashboard`
9. **看到提示** → "项目库为空"（如果管理员还没添加项目）
10. **前往项目库** → `/projects`
11. **添加项目** → 创建几个不同风险等级的项目
12. **前往推荐** → `/recommend`
13. **设置API Key** → 输入 OpenAI API Key
14. **生成推荐** → 点击"生成我的投资推荐"
15. **查看结果** → 查看AI生成的配置方案
16. **保存方案** → 点击"保存推荐方案"
17. **查看历史** → 前往 `/history` 查看保存的记录
18. **退出登录** → 点击导航栏"退出"按钮

### 老用户回访

1. **访问网站** → http://localhost:3000
2. **自动登录** → 识别 localStorage 中的 Token
3. **跳转首页** → `/dashboard`
4. **查看统计** → 画像已完善、项目X个、记录Y条
5. **直接使用** → 点击功能卡片进入对应模块

---

## ✅ 完整功能清单

### Phase 1: 用户认证 ✅
- [x] 注册功能
- [x] 登录功能
- [x] JWT 认证
- [x] 密码加密（bcrypt）
- [x] 记住我功能
- [x] 自动登录恢复
- [x] 退出登录

### Phase 2: 用户中心 ✅
- [x] 投资画像展示
- [x] 投资画像编辑
- [x] 风险偏好设置
- [x] 投资金额设置
- [x] 投资期限设置
- [x] 投资目标设置
- [x] 保存/取消功能

### Phase 3: 项目库 ✅
- [x] 项目列表展示
- [x] 项目创建
- [x] 项目编辑
- [x] 项目删除
- [x] 高级筛选（类型/风险/门槛）
- [x] 删除确认
- [x] 响应式表格

### Phase 4: 智能推荐 ✅
- [x] 画像检查
- [x] API 设置
- [x] OpenAI 调用
- [x] 推荐结果展示
- [x] 配置总览
- [x] 项目配置列表
- [x] 保存方案
- [x] 重新生成

### Phase 5: 推荐记录 ✅
- [x] 历史记录列表
- [x] 记录详情查看
- [x] 时间排序
- [x] 详情模态框

### Phase 6: 首页仪表盘 ✅
- [x] 欢迎信息
- [x] 快速统计
- [x] 功能模块卡片
- [x] 快速操作提示
- [x] 智能引导

### 全局功能 ✅
- [x] 导航栏
- [x] 路由保护
- [x] 响应式布局
- [x] 黑白色系
- [x] 加载状态
- [x] 错误处理

---

## 🎯 现在可以做什么？

1. **访问首页** → http://localhost:3000
2. **完整体验流程** → 从登录到使用所有功能
3. **测试AI推荐** → 输入API Key生成推荐
4. **查看数据文件** → 检查 `data/` 文件夹中的JSON文件

---

**🎉 完整网站已搭建完成！所有页面都已互相连接，数据流畅通！**
